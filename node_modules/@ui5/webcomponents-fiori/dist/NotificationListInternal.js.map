{"version":3,"file":"NotificationListInternal.js","sourceRoot":"","sources":["../src/NotificationListInternal.ts"],"names":[],"mappings":"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","sourcesContent":["import List from \"@ui5/webcomponents/dist/List.js\";\nimport customElement from \"@ui5/webcomponents-base/dist/decorators/customElement.js\";\nimport NavigationMode from \"@ui5/webcomponents-base/dist/types/NavigationMode.js\";\nimport type ListItemBase from \"@ui5/webcomponents/dist/ListItemBase.js\";\nimport NotificationListGroupItem from \"./NotificationListGroupItem.js\";\nimport {\n\tisDown,\n\tisUp,\n\tisLeft,\n\tisRight,\n\tisHome,\n\tisEnd,\n} from \"@ui5/webcomponents-base/dist/Keys.js\";\nimport type NotificationListItemBase from \"./NotificationListItemBase.js\";\nimport getActiveElement from \"@ui5/webcomponents-base/dist/util/getActiveElement.js\";\n\n/**\n * @class\n *\n * Internal `ui5-li-notification-list-list` component,\n * that is used to support keyboard navigation of the notification list internal list.\n *\n * @private\n */\n@customElement(\"ui5-notification-list-internal\")\nclass NotificationListInternal extends List {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._itemNavigation._navigationMode = NavigationMode.Auto;\n\t}\n\n\t_allNavigationItems: Array<HTMLElement> = [];\n\n\tgetEnabledItems(): Array<ListItemBase> {\n\t\tconst items = new Array<ListItemBase>();\n\t\tconst allNavigationItems = new Array<HTMLElement>();\n\n\t\tthis.getItems().forEach(item => {\n\t\t\titems.push(item);\n\t\t\tallNavigationItems.push(item);\n\n\t\t\tif (item instanceof NotificationListGroupItem && !item.collapsed && !item.loading) {\n\t\t\t\titem.items.forEach(subItem => {\n\t\t\t\t\titems.push(subItem);\n\t\t\t\t\tallNavigationItems.push(subItem);\n\t\t\t\t});\n\n\t\t\t\tconst growingButton = item.getGrowingButton();\n\t\t\t\tif (growingButton) {\n\t\t\t\t\tallNavigationItems.push(growingButton);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst growingButton = this.getGrowingButton();\n\t\tif (growingButton) {\n\t\t\tallNavigationItems.push(growingButton);\n\t\t}\n\n\t\tthis._allNavigationItems = allNavigationItems;\n\n\t\treturn items;\n\t}\n\n\t_onkeydown(e: KeyboardEvent) {\n\t\tif (isEnd(e)) {\n\t\t\tthis._handleEndKey(e);\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tif (isHome(e)) {\n\t\t\tthis._handleHomeKey(e);\n\t\t\te.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._focusSameItemOnNextRow(e);\n\t}\n\n\t_handleHomeKey(e: KeyboardEvent) {\n\t\te.stopImmediatePropagation();\n\n\t\tconst target = e.target as HTMLElement;\n\t\tconst activeElement = getActiveElement()! as HTMLElement;\n\n\t\tif ((!this._isGrowingButton(activeElement) && target?.hasAttribute(\"ui5-li-notification-group\"))\n\t\t\t|| target?.hasAttribute(\"ui5-menu-item\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentFocusedItem = this.getEnabledItems()[this._itemNavigation._currentIndex];\n\t\tif (!currentFocusedItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentFocusedIndex = this._allNavigationItems.indexOf(currentFocusedItem);\n\t\tlet nextFocusedIndex = 0;\n\n\t\tfor (let i = currentFocusedIndex - 1; i >= 0; i--) {\n\t\t\tconst item = this._allNavigationItems[i];\n\t\t\tif (item.hasAttribute(\"ui5-li-notification-group\")) {\n\t\t\t\tnextFocusedIndex = i + 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis._allNavigationItems[nextFocusedIndex].focus();\n\t}\n\n\t_handleEndKey(e: KeyboardEvent) {\n\t\te.stopImmediatePropagation();\n\n\t\tconst target = e.target as HTMLElement;\n\n\t\tif (target?.hasAttribute(\"ui5-menu-item\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentFocusedItem = this.getEnabledItems()[this._itemNavigation._currentIndex];\n\t\tif (!currentFocusedItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentFocusedIndex = this._allNavigationItems.indexOf(currentFocusedItem);\n\t\tlet nextFocusedIndex = this._allNavigationItems.length - 1;\n\n\t\tfor (let i = currentFocusedIndex + 1; i < this._allNavigationItems.length; i++) {\n\t\t\tconst item = this._allNavigationItems[i];\n\n\t\t\tif (item.hasAttribute(\"ui5-li-notification-group\")) {\n\t\t\t\tnextFocusedIndex = i - 1;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (this._isGrowingButton(item)) {\n\t\t\t\tnextFocusedIndex = i === currentFocusedIndex + 1 ? i : i - 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis._allNavigationItems[nextFocusedIndex].focus();\n\t}\n\n\t_focusSameItemOnNextRow(e: KeyboardEvent) {\n\t\tif (!isUp(e) && !isDown(e) && !isLeft(e) && !isRight(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = e.target as HTMLElement;\n\t\tconst shadowTarget = target.shadowRoot!.activeElement as HTMLElement;\n\t\tconst activeElement = getActiveElement()! as HTMLElement;\n\t\tconst isGrowingBtn = this._isGrowingButton(activeElement);\n\n\t\tif (!target || target.hasAttribute(\"ui5-menu-item\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isFocusWithin = target.matches(\":focus-within\");\n\t\tif (!isFocusWithin) {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\t\te.stopImmediatePropagation();\n\n\t\tconst currentItem = isGrowingBtn ? activeElement : this.getEnabledItems()[this._itemNavigation._currentIndex];\n\t\tconst index = this._allNavigationItems.indexOf(currentItem) + ((isUp(e) || isLeft(e)) ? -1 : 1);\n\t\tconst nextItem = this._allNavigationItems[index];\n\t\tif (!nextItem) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._isGrowingButton(nextItem) || shadowTarget.classList.contains(\"ui5-nli-focusable\")) {\n\t\t\tnextItem.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tconst nextListItem = nextItem as NotificationListItemBase;\n\t\tif (nextListItem.loading || (isLeft(e) || isRight(e))) {\n\t\t\tnextItem.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tconst sameItemOnNextRow = nextListItem.getHeaderDomRef()!.querySelector<HTMLElement>(`.${shadowTarget.className}`);\n\t\tif (sameItemOnNextRow && sameItemOnNextRow.offsetParent) {\n\t\t\tsameItemOnNextRow.focus();\n\t\t} else {\n\t\t\tnextItem.focus();\n\t\t}\n\t}\n\n\t_isGrowingButton(item: Element | null) {\n\t\treturn item?.classList.contains(\"ui5-growing-button-inner\");\n\t}\n}\n\nNotificationListInternal.define();\n\nexport default NotificationListInternal;\n"]}